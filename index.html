<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eighth Dimension</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="loading-dots" id="loadingDots">Finding your fortune...</div>
    
    <div class="container">
        <div class="data-panel" id="dataPanel" style="opacity: 0; transform: scale(0.9); transition: all 0.8s ease;">
            <div class="fortune-section">
                <div class="fortune-message-container">
                    <div class="fortune-message" id="fortuneMessage">Loading...</div>
                    <p class="fortune-subtitle">Personalized fortune message generated from the attributes of your unique brainwave data</p>
                </div>
                <a href="?id=NDd4MTIxMQ" class="example-link">See an example with real brainwaves!</a>
            </div>

            <div class="brainwave-section">
                <h4>Your Brainwave Frequencies</h4>
                <p class="graph-subtitle">Prominence of each type of brainwave frequency in your data relative to an average baseline</p>
                <div class="brainwave-grid">
                    <div class="wave-stat red-bg">
                        <svg class="wave-viz" id="deltaWave" width="80" height="60" viewBox="0 0 80 60">
                            <path class="wave-path" d="" stroke="oklch(var(--text-lightness) var(--text-chroma) 30)" stroke-width="1.5" fill="none"/>
                        </svg>
                        <div class="wave-value" id="deltaBox">-</div>
                        <div class="wave-info">
                            <div class="wave-name">Delta</div>
                            <div class="wave-description"><b>Unconscious mind:</b> dreamlike states, mental rejuvenation (0.5-4 Hz)</div>
                        </div>
                    </div>
                    <div class="wave-stat orange-bg">
                        <svg class="wave-viz" id="thetaWave" width="80" height="60" viewBox="0 0 80 60">
                            <path class="wave-path" d="" stroke="oklch(var(--text-lightness) var(--text-chroma) 60)" stroke-width="1.5" fill="none"/>
                        </svg>
                        <div class="wave-value" id="thetaBox">-</div>
                        <div class="wave-info">
                            <div class="wave-name">Theta</div>
                            <div class="wave-description"><b>Subconscious mind:</b> intuition, creativity, deep meditation (4-8 Hz)</div>
                        </div>
                    </div>
                    <div class="wave-stat yellow-bg">
                        <svg class="wave-viz" id="alphaWave" width="80" height="60" viewBox="0 0 80 60">
                            <path class="wave-path" d="" stroke="oklch(var(--text-lightness) var(--text-chroma) 100)" stroke-width="1.5" fill="none"/>
                        </svg>
                        <div class="wave-value" id="alphaBox">-</div>
                        <div class="wave-info">
                            <div class="wave-name">Alpha</div>
                            <div class="wave-description"><b>Calm mind:</b> gentle relaxation, clarity, meditation (8-12 Hz)</div>
                        </div>
                    </div>
                    <div class="wave-stat cyan-bg">
                        <svg class="wave-viz" id="betaWave" width="80" height="60" viewBox="0 0 80 60">
                            <path class="wave-path" d="" stroke="oklch(var(--text-lightness) var(--text-chroma) 200)" stroke-width="1.5" fill="none"/>
                        </svg>
                        <div class="wave-value" id="betaBox">-</div>
                        <div class="wave-info">
                            <div class="wave-name">Beta</div>
                            <div class="wave-description"><b>Active mind:</b> focus, awareness, problem-solving (12-30 Hz)</div>
                        </div>
                    </div>
                    <div class="wave-stat blue-bg">
                        <svg class="wave-viz" id="gammaWave" width="80" height="60" viewBox="0 0 80 60">
                            <path class="wave-path" d="" stroke="oklch(var(--text-lightness) var(--text-chroma) 250)" stroke-width="1.5" fill="none"/>
                        </svg>
                        <div class="wave-value" id="gammaBox">-</div>
                        <div class="wave-info">
                            <div class="wave-name">Gamma</div>
                            <div class="wave-description"><b>Heightened mind:</b> making connections, insight (30-100 Hz)</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="graph-section" id="brainwaveGraphSection">
                <h4>Your Brainwave Frequencies Over Time</h4>
                <p class="graph-subtitle warning-subtitle">Note: a long straight line indicates poor connection, when only averages are sent instead of second-to-second data.</p>
                <div style="position: relative; height: 160px; width: 100%;">
                    <canvas id="brainwaveChart"></canvas>
                </div>
            </div>

            <div class="graph-section">
                <h4>Your Mind During the Experience</h4>
                <p class="graph-subtitle">Based on live analysis of your brainwaves</p>
                <p class="graph-subtitle warning-subtitle">Note: a long straight line indicates poor connection, when only averages are sent instead of second-to-second data.</p>
                <div style="position: relative; height: 120px; width: 100%;">
                    <canvas id="activenessChart"></canvas>
                </div>
                <div class="activeness-gradient-legend">
                    <div class="gradient-bar"></div>
                    <div class="gradient-labels">
                        <span class="label-left">Active</span>
                        <span class="label-center">Calm</span>
                        <span class="label-right">Deepest<br>Meditation</span>
                    </div>
                </div>
            </div>

            <!-- ML Analysis section commented out for now
            <div class="ml-section">
                <h4>ML Analysis</h4>
                <div class="ml-grid">
                    <div class="analysis-stat red-bg">
                        <div class="analysis-value" id="dreamBox">-</div>
                        <div class="analysis-info">
                            <div class="analysis-name">Dream</div>
                            <div class="analysis-description">Deep sleep or trace</div>
                        </div>
                    </div>
                    <div class="analysis-stat yellow-bg">
                        <div class="analysis-value" id="clearBox">-</div>
                        <div class="analysis-info">
                            <div class="analysis-name">Clear</div>
                            <div class="analysis-description">Relaxed awareness</div>
                        </div>
                    </div>
                    <div class="analysis-stat blue-bg">
                        <div class="analysis-value" id="focusBox">-</div>
                        <div class="analysis-info">
                            <div class="analysis-name">Focus</div>
                            <div class="analysis-description">Alert awareness</div>
                        </div>
                    </div>
                    <div class="analysis-stat purple-bg">
                        <div class="analysis-value" id="meditationBox">-</div>
                        <div class="analysis-info">
                            <div class="analysis-name">Meditation</div>
                            <div class="analysis-description">True meditation</div>
                        </div>
                    </div>
                </div>
            </div>
            -->

            <div class="bottom-title">
                <h3>The Eighth Dimension: Where the Mind Meets the Ocean</h3>
                <p class="credits">by
                    <a href="https://www.voyowoo.com/">Voyo Woo</a>,
                    <a href="https://www.yacavone.net/">Matthew Yacavone</a>,
                    <a href="https://www.instagram.com/nanae_itoi/">Nanae Itoi</a> and
                    <a href="https://www.carolinamorales.com/">Carolina Morales</a>
                </p>
                <p class="credits">with help from
                    <a href="https://jasonjsnell.com/">Jason Snell</a>
                </p>
                <p class="timestamp" id="timestamp"></p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
    <script src="./water-caustics/caustics.js"></script>
    <script>
        // Initialize caustics when DOM is ready
        window.addEventListener('load', () => {
            init('./water-caustics/').catch(error => {
                console.error('Failed to initialize caustics:', error);
            });
        });
    </script>
    <script src="brainwave.js"></script>
</body>
</html>
